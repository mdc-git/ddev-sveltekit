name: ddev-sveltekit

pre_install_actions:
- |
  #ddev-nodisplay
  echo "Check for src/hooks.server.js:"
  if [ -f src/hooks.server.js ]; then
    echo "src/hooks.server.js exists. Cannot continue." && exit 2
  fi
  echo $PWD

project_files:
  - nginx_full/nginx-site.conf
  - sveltekit/hooks.server.js
  - docker-compose.network.yaml

post_install_actions:
  - cp sveltekit/hooks.server.js ../src/hooks.server.js
  - echo '##############################################################'
  - echo 'Please do not forget to edit .ddev/docker-compose.network.yaml'
  - echo '##############################################################'
